fix: usage of global vars throughout the library